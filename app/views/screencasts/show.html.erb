<%= div_for screencast do %>
  <h3 class="title">#<%= screencast.number %> <%= screencast.title %></h3>
  <div class="description"><%= simple_format screencast.description %></div>
  <h3><strong><%= link_to 'Watch Screencast', screencast.url %></strong></h3>
<% end %>

<div class="comments">
  <div id="disqus_thread"></div>
</div>
<%= javascript_tag do %>
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */
  (function() {
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'http://fiveminuteruby.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
<% end %>

<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=fiveminuteruby">comments powered by Disqus.</a></noscript>

<% content_for :js do %>
  (function() {
  	var links = document.getElementsByTagName('a');
  	var query = '?';
  	for(var i = 0; i < links.length; i++) {
  	  if(links[i].href.indexOf('#disqus_thread') >= 0) {
  		  query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
  	  }
    }
    document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/fiveminuteruby/get_num_replies.js' + query + '"></' + 'script>');
  })();
<% end %>